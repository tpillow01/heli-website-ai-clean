/* =========================================================
   Tynan Equipment AI â€” Exact Light Mockup w/ Mode + Map on top
   ========================================================= */

/* ---------- Tokens ---------- */
:root{
  --page:#f6f2ea; --shell:#fffaf3; --panel:#fffdf8; --panel-2:#faf3e6;
  --ink:#1c1d22; --muted:#6b6e77; --line:#e8e0d3;
  --accent:#c92a24; --accent-2:#e8564f;

  --bubble-ai:#fff6e9; --bubble-user:#fdeee9; --input:#fffaf2;

  --r-xl:26px; --r-lg:20px; --r:16px; --r-sm:12px;

  --shadow-lg:0 22px 50px rgba(119,84,20,.12);
  --shadow-md:0 14px 30px rgba(119,84,20,.10);
  --shadow-sm:0 6px 16px rgba(119,84,20,.10);
}

/* ---------- Base ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:var(--ink);
  background:
    linear-gradient(0deg, transparent 24px, var(--line) 25px, transparent 26px),
    linear-gradient(90deg, transparent 24px, var(--line) 25px, transparent 26px),
    var(--page);
  background-size:26px 26px,26px 26px,auto;
  display:flex;align-items:center;justify-content:center;
  padding:16px;
}

/* ---------- App shell ---------- */
.chat-container{
  width:100%; max-width:1100px; height:90vh;
  background:var(--shell);
  border:1px solid var(--line);
  border-radius:var(--r-xl);
  box-shadow:var(--shadow-lg);
  display:flex; flex-direction:column; position:relative; overflow:hidden;
}

/* ---------- Header (text) ---------- */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; border-bottom:1px solid var(--line); background:var(--shell);
}
.brand{font-size:26px; font-weight:900; letter-spacing:.2px}
.brand .accent{color:var(--accent)}
.topbar-right{display:flex; align-items:center; gap:12px}
.chip{
  font-weight:800; font-size:.92rem; color:var(--ink);
  background:var(--panel-2); border:1px solid var(--line);
  border-radius:999px; padding:8px 12px; box-shadow:var(--shadow-sm);
}

/* ---------- Tabs row (with Map + Mode at top) ---------- */
.navbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:10px 18px; background:var(--shell);
  box-shadow:0 6px 18px rgba(119,84,20,.08);
}
.menu-btn{
  width:42px;height:32px;border-radius:12px;border:1px solid var(--line);
  background:var(--panel-2); position:relative; flex-shrink:0;
}
.menu-btn::before,.menu-btn::after{
  content:""; position:absolute; left:10px; right:10px; height:2px; background:#9c8e7a;
}
.menu-btn::before{top:9px} .menu-btn::after{bottom:9px}

.tabs{display:flex; align-items:center; gap:26px}
.tab{
  color:var(--ink); text-decoration:none; font-weight:800;
  padding:6px 10px; border-radius:999px; position:relative;
}
.tab.active::after{
  content:""; position:absolute; left:10px; right:10px; bottom:-9px;
  height:3px; background:var(--accent); border-radius:3px;
}

/* Mode on the right side of the same row */
.nav-actions{
  margin-left:auto; display:flex; align-items:center; gap:12px; flex-wrap:nowrap;
}
.mode-wrap{
  display:flex; align-items:center; gap:10px;
  background:var(--panel); border:1px solid var(--line);
  border-radius:16px; padding:8px 10px; box-shadow:var(--shadow-sm);
}
.mode-label{font-weight:800}
.mode-select{
  background:var(--panel-2); color:var(--ink);
  border:1px solid var(--line); border-radius:12px; padding:8px 12px;
  outline:none; appearance:none; transition:border-color .2s, box-shadow .2s;
}
.mode-select:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(201,42,36,.18)}

/* ---------- Stage (faint forklift sketch) ---------- */
.stage{
  position:relative; flex:1; margin:0 18px; border-radius:var(--r-lg); overflow:hidden;
}
.stage::after{
  content:""; position:absolute; inset:0;
  background:url("/static/forklift_heli.png") center 38%/36% no-repeat;
  opacity:.06; filter:grayscale(100%); pointer-events:none;
}

/* ---------- Forklift animation (crisp, on top) ---------- */
.forklift-animation{
  position:absolute; top:44%; left:0; width:100%;
  display:none; transform:translateY(-50%); pointer-events:none; z-index:9;
}
.forklift-unit{position:absolute; left:0; transition:left 2s ease-in-out}
.forklift-img{width:240px; height:auto; opacity:1; filter:drop-shadow(0 10px 22px rgba(0,0,0,.22))}

/* ---------- Chat area & bubbles ---------- */
.response-area{
  position:relative; z-index:1; height:100%;
  padding:18px 4px 0; overflow-y:auto; display:flex; flex-direction:column; gap:14px;
  background:linear-gradient(180deg, transparent, var(--panel) 92%);
}
.response-bubble{
  max-width:78%; padding:16px 18px; border-radius:18px;
  line-height:1.6; white-space:pre-wrap; font-size:16px;
  border:1px solid var(--line); box-shadow:var(--shadow-sm);
  background:var(--bubble-ai);
}
.response-bubble.user{align-self:flex-end; background:var(--bubble-user)}
.section-label{color:#7b4f1b; font-weight:800; display:block; margin-bottom:6px}

/* ---------- Input row ---------- */
.input-form{
  display:flex; align-items:center; gap:12px;
  margin:12px 18px 18px; padding:16px;
  background:var(--panel); border:1px solid var(--line);
  border-radius:var(--r-lg); box-shadow:var(--shadow-md);
}
.input-form textarea{
  flex:1; min-height:64px; max-height:200px;
  padding:12px 14px; font-size:15px; border-radius:14px;
  background:var(--input); color:var(--ink);
  border:1px solid var(--line); outline:none; resize:vertical;
  transition:border-color .2s, box-shadow .2s;
}
.input-form textarea:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(201,42,36,.16)}
.input-form button{
  padding:12px 24px; font-size:16px; font-weight:900; letter-spacing:.2px;
  color:#fff; background:linear-gradient(180deg,#e85a52,var(--accent));
  border:0; border-radius:999px; cursor:pointer;
  box-shadow:0 10px 28px rgba(201,42,36,.28);
  transition:filter .2s, transform .06s;
}
.input-form button:hover{filter:brightness(1.05)}
.input-form button:active{transform:translateY(1px)}

/* ---------- Footer ---------- */
.footer{
  text-align:center; padding:10px; font-size:12px; color:var(--muted);
  border-top:1px solid var(--line); background:var(--panel);
}

/* ---------- Responsive ---------- */
@media (max-width:900px){
  .brand{font-size:22px}
  .tabs{gap:18px}
  .nav-actions{gap:10px}
}
@media (max-width:720px){
  .navbar{flex-wrap:wrap; gap:10px}
  .nav-actions{width:100%; justify-content:flex-end}
  .stage{margin:0 12px}
  .input-form{margin:12px 12px 16px}
}
@media (max-width:520px){
  .brand{font-size:20px}
  .response-bubble{font-size:15px; max-width:88%}
  .forklift-img{width:200px}
}

/* ---------- Reduced motion ---------- */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.001ms!important; animation-iteration-count:1!important; transition-duration:.001ms!important; scroll-behavior:auto!important}
}
